var deferredPrompt,sW,enableNotifications=document.querySelectorAll(".enable-notifications");function displayConfirmNotification(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(i){i.showNotification("succesfully subscribed!!!",{body:"Successfully subscribed to our notification service",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:!0,actions:[{action:"confirm",title:"okay",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"cancel",icon:"/src/images/icons/app-icon-96x96.png"}]})})}function configurationPushSub(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(i){return(sW=i).pushManager.getSubscription()}).then(function(i){if(null===i)return i=urlBase64ToUint8Array("BHravC5_dCsKTciME0ibsmG8m6VmMdTQK6ZglMyNB8EPFTagKpFD911XpYnAdeOgit7FLb7NsviqWbvU263Yf5w"),sW.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i})}).then(function(i){return fetch("http://localhost:3000/subscriptions",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})}).then(function(i){console.log("subscription saved response",i),console.log("subscription saved ok",i?.ok),displayConfirmNotification()}).catch(function(i){console.log(i)})}function askNotificationPermission(i){Notification.requestPermission(function(i){console.log("User choice",i),"granted"===i?configurationPushSub():"denied"===i&&console.log("no notification permission granted")})}if(window.Promise||(window.Promise=Promise),"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceWorker.js").then(()=>{console.log("service worker registered")}),window.addEventListener("beforeinstallprompt",i=>(i.preventDefault(),deferredPrompt=i,!1)),"Notification"in window)for(var i=0;i<enableNotifications.length;i++)enableNotifications[i].style.display="inline-block",enableNotifications[i].addEventListener("click",askNotificationPermission);